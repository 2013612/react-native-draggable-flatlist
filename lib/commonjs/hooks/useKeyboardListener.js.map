{"version":3,"names":["shouldTrackKeyboard","Platform","OS","useKeyboardEvent","eventType","callback","useEffect","listener","Keyboard","addListener","remove","useKeyboardListener","useSafeNestableScrollContainerContext","outerScrollOffset","scrollableRef","onKeyboardShown","useCallback","e","keyboardHeight","endCoordinates","height","currentInput","TextInput","State","currentlyFocusedInput","measure","originX","originY","width","pageX","pageY","yFromTop","componentHeight","screenHeight","Dimensions","get","yFromBottom","hiddenOffset","margin","current","scrollTo","animated","y","value"],"sources":["useKeyboardListener.tsx"],"sourcesContent":["import { useCallback, useEffect } from \"react\";\nimport {\n  Dimensions,\n  Keyboard,\n  KeyboardEvent,\n  KeyboardEventName,\n  Platform,\n  TextInput,\n} from \"react-native\";\nimport { useSafeNestableScrollContainerContext } from \"../context/nestableScrollContainerContext\";\n\nconst shouldTrackKeyboard = Platform.OS === \"ios\";\n\nfunction useKeyboardEvent(\n  eventType: KeyboardEventName,\n  callback: ((e: KeyboardEvent) => void) | null\n) {\n  useEffect(() => {\n    if (!callback) {\n      return;\n    }\n\n    const listener = Keyboard.addListener(eventType, callback);\n    return () => listener.remove();\n  }, [eventType, callback]);\n}\n\nexport default function useKeyboardListener() {\n  const {\n    outerScrollOffset,\n    scrollableRef,\n  } = useSafeNestableScrollContainerContext();\n\n  const onKeyboardShown = useCallback((e: KeyboardEvent) => {\n    const keyboardHeight = e.endCoordinates.height;\n    const currentInput = TextInput.State.currentlyFocusedInput();\n\n    if (!currentInput) {\n      return;\n    }\n\n    currentInput.measure((originX, originY, width, height, pageX, pageY) => {\n      const yFromTop = pageY;\n      const componentHeight = height;\n      const screenHeight = Dimensions.get(\"window\").height;\n      const yFromBottom = screenHeight - yFromTop - componentHeight;\n      const hiddenOffset = keyboardHeight - yFromBottom;\n      const margin = 32;\n      if (hiddenOffset > 0) {\n        scrollableRef.current?.scrollTo({\n          animated: true,\n          y: outerScrollOffset.value + hiddenOffset + margin,\n        });\n      }\n    });\n  }, []);\n\n  useKeyboardEvent(\n    \"keyboardDidShow\",\n    shouldTrackKeyboard ? onKeyboardShown : null\n  );\n}\n"],"mappings":"6FAAA,4BACA,yCAQA,yFAEA,GAAMA,oBAAmB,CAAGC,qBAAA,CAASC,EAAT,GAAgB,KAA5C,CAEA,QAASC,iBAAT,CACEC,SADF,CAEEC,QAFF,CAGE,CACA,GAAAC,gBAAA,EAAU,UAAM,CACd,GAAI,CAACD,QAAL,CAAe,CACb,OACD,CAED,GAAME,SAAQ,CAAGC,qBAAA,CAASC,WAAT,CAAqBL,SAArB,CAAgCC,QAAhC,CAAjB,CACA,MAAO,kBAAME,SAAQ,CAACG,MAAT,EAAN,EAAP,CACD,CAPD,CAOG,CAACN,SAAD,CAAYC,QAAZ,CAPH,EAQD,CAEc,QAASM,oBAAT,EAA+B,2BAIxC,GAAAC,qEAAA,GAJwC,CAE1CC,iBAF0C,uBAE1CA,iBAF0C,CAG1CC,aAH0C,uBAG1CA,aAH0C,CAM5C,GAAMC,gBAAe,CAAG,GAAAC,kBAAA,EAAY,SAACC,CAAD,CAAsB,CACxD,GAAMC,eAAc,CAAGD,CAAC,CAACE,cAAF,CAAiBC,MAAxC,CACA,GAAMC,aAAY,CAAGC,sBAAA,CAAUC,KAAV,CAAgBC,qBAAhB,EAArB,CAEA,GAAI,CAACH,YAAL,CAAmB,CACjB,OACD,CAEDA,YAAY,CAACI,OAAb,CAAqB,SAACC,OAAD,CAAUC,OAAV,CAAmBC,KAAnB,CAA0BR,MAA1B,CAAkCS,KAAlC,CAAyCC,KAAzC,CAAmD,CACtE,GAAMC,SAAQ,CAAGD,KAAjB,CACA,GAAME,gBAAe,CAAGZ,MAAxB,CACA,GAAMa,aAAY,CAAGC,uBAAA,CAAWC,GAAX,CAAe,QAAf,EAAyBf,MAA9C,CACA,GAAMgB,YAAW,CAAGH,YAAY,CAAGF,QAAf,CAA0BC,eAA9C,CACA,GAAMK,aAAY,CAAGnB,cAAc,CAAGkB,WAAtC,CACA,GAAME,OAAM,CAAG,EAAf,CACA,GAAID,YAAY,CAAG,CAAnB,CAAsB,2BACpB,uBAAAvB,aAAa,CAACyB,OAAd,qCAAuBC,QAAvB,CAAgC,CAC9BC,QAAQ,CAAE,IADoB,CAE9BC,CAAC,CAAE7B,iBAAiB,CAAC8B,KAAlB,CAA0BN,YAA1B,CAAyCC,MAFd,CAAhC,EAID,CACF,CAbD,EAcD,CAtBuB,CAsBrB,EAtBqB,CAAxB,CAwBAnC,gBAAgB,CACd,iBADc,CAEdH,mBAAmB,CAAGe,eAAH,CAAqB,IAF1B,CAAhB,CAID"}